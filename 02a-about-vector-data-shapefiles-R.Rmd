---
title: "Spatial Intro 02.1: Vector Data - Intro to Shapefiles in R"
date:   2016-09-25
authors: [Leah A. Wasser]
contributors: [Megan Jones]
dateCreated: 2016-09-25
lastModified: `r format(Sys.time(), "%Y-%m-%d")`
packagesLibraries: [raster, rgdal, sp]
category: [self-paced-tutorial]
tags: [R, spatial-data-gis]
mainTag: spatial-data-management-series
workshopSeries: [spatial-data-management-series]
description: "This tutorial introduces the vector spatial data format, stored in
shapefile format."
code1: /R/dc-spatio-temporal-intro/02a-about-vector-data-shapefiles-R.R
image:
  feature:
  credit:
  creditlink:
permalink: /R/about-shapefiles
comments: true
sidebar:
  nav: "spatial-intro"
author_profile: false
---

<div class="notice--success" markdown="1">


# Goals / Objectives

After reading this post, you will:

* Understand the key files associated with a shapefile: shp, dbf, shx.


### Install R Packages

* **raster:** `install.packages("raster")`
* **rgdal:** `install.packages("rgdal")`


****

### Additional Resources

* Wikipedia article on
<a href="https://en.wikipedia.org/wiki/GIS_file_formats" target="_blank">
GIS file formats.</a>

</div>

# Types of Spatial Data

Spatial data are represented in many different ways and are stored in different
file formats. In this tutorial, we will focus on the two types of spatial data:
raster and vector data.

## Vector Data - Points, Lines, Polygons

Vector data, are often used to store things like road and plot locations,
boundaries of states, countries and lakes.

Vector data are composed of discrete geometric locations (x,y values) known as
**vertices** that define the "shape" of the spatial object. The organization
of the vertices determines the type of vector that we are working
with: **point**, **line** or **polygon**.

<figure>
    <a href="{{ site.baseurl }}/images/dc-spatial-vector/pnt_line_poly.png">
    <img src="{{ site.baseurl }}/images/dc-spatial-vector/pnt_line_poly.png"></a>
    <figcaption> There are 3 types of vector objects: points, lines or
    polygons. Each vector object type has a different structure.
    Image Source: National Ecological Observatory Network (NEON)
    </figcaption>
</figure>

* **Points:** Each individual point is defined by a **single x, y coordinate**.
There can be many points in a vector point file. Examples of point data include:
	+ sampling locations,
	+ the location of individual trees or
	+ the location of plots.
* **Lines:** Lines are composed of **many (at least 2) vertices that
are connected**. For instance, a road or a stream may be represented by a line.
This line is composed of a series of segments, each "bend" in the road or stream
represents a vertex that has defined `x, y` location.
* **Polygons:** A polygon consists of **3 or more vertices that are connected
and "closed"**. Occasionally, a polygon can have a hole in the middle of it
(like a doughnut), this is something to be aware of but not an issue we will
deal with in this tutorial series. Objects often represented by polygons
include:
	+ outlines of plot boundaries,
	+ lakes,
	+ oceans and
	+ states or country boundaries.


<i class="fa fa-star"></i> **Data Tip:** A shapefile will only contain **one
type of vector data**: points, lines or polygons.
{: .notice}

```{r import-vector, warning=FALSE}

# load libraries required to work with spatial data
library(raster) # commands to view metadata from vector objects
library(rgdal) # library of common GIS functions

# Open shapefile
roads_HARV <- readOGR("NEON-DS-Site-Layout-Files/HARV","HARV_roads")

# view slots available for the object
slotNames(roads_HARV)

# view all methods available for that object
# methods(class = class(roads_HARV))

```


## Stucture of a Lines Feature

If we are working with a shapefile containing **line** data, then each line
consists of 2 or more vertices that are connected. We can view each set of coordinates
for that object using `R`.

```{r view-lines-coordinates }

# view the coordinates for each vertex, for the last feature in the spatial object
roads_HARV@lines[13]

# view the coordinates for the last feature in the spatial object
roads_HARV@lines[14]

```


<div class="notice--warning" markdown="1">
Question - Why didn't `roads_HARV@lines[14]` return any vertex coordinates?
</div>

## Spatial Data Attributes

Each object in a shapefile, is called a `feature`. Each `feature` has one or
more `attributes` associated with it.

Shapefile attributes are similar to fields or columns in a spreadsheet. Each row
in the spreadsheet has a set of columns associated with it that describe the row
element. In the case of a shapefile, each row represents a spatial object - for
example, a road, represented as a line in a line shapefile, will have one "row"
of attributes associated with it. These attributes can include different types
of information that describe shapefile `features`. Thus, a road,
may have a name, length, number of lanes, speed limit, type of road and other
attributes stored with it.

<figure>
    <a href="{{ site.baseurl }}/images/dc-spatial-vector/Attribute_Table.png">
    <img src="{{ site.baseurl }}/images/dc-spatial-vector/Attribute_Table.png"></a>
    <figcaption>Each spatial feature in an R spatial object has the same set of
    associated attributes that describe or characterize the feature.
    Attribute data are stored in a separate *.dbf file. Attribute data can be
    compared to a spreadsheet. Each row in a spreadsheet represents one feature
    in the spatial object.
    Image Source: National Ecological Observatory Network (NEON)
    </figcaption>
</figure>


```{r view-attributes }
# view all attributes for a spatial object
# note, the code below just looks at the first 3 features
head(roads_HARV@data, 3)

```

In the map below of the Harvard Forest field site, there are many different features
with different spatial object types. We will learn to create maps like this in
the
[*Introduction to Working with Vector Data in R* tutorial series]({{ site.basurl }}/tutorial-series/vector-data-series/).

<figure>
    <a href="{{ site.baseurl }}/images/dc-spatio-temporal-intro/plot-color.png">
    <img src="{{ site.baseurl }}/images/dc-spatio-temporal-intro/plot-color.png"></a>
    <figcaption>The map above contains point and line format vector data. We will
    create a map like this in the vector data tutorial series.
    Image Source: National Ecological Observatory Network (NEON)
    </figcaption>
</figure>

<div class="notice--warning" markdown="1">

## Challenge: Shapefiles

Have a look at the map above:  **Study Plots by Soil Type**. What is the minimum number of
shapefiles that are required to create this map? How do you know?

</div>


```{r challenge-code-shapefiles, echo=FALSE}


# Two. There are both points (study plots labelled in legend by the soil type)
# and lines (the boardwalk, footpath, stone walls, and woods road in legend) in
# this map. Since there are two different types of vectors (points & lines)
# there must be two shapefiles as a single shapefile can only contain 1 type of
# vector data.

```


### Vector Data in .CSV Format

The shapefile format is one (very common) way to store vector data. However,
you may encounter is in other formats. For example, sometimes, point data are
stored as a Comma Separated Value (.CSV) format.


We cover working with vector points in .csv format in the
[tutorial: Convert from .csv to a Shapefile in R.](http://neondataskills.org/Vector 04: Convert from .csv to a Shapefile in R).
